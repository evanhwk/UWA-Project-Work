## Description
```
Question/Testing Server for CITS3002 Network Quiz
by Evan Huang (c) 2018
```

Written for Linux

## Requirements

`python2.7` `java-sdk` `openssl`

## Setup

Compile the TestingServer with `javac TestingServer.java PasswordAuthentication.java PasswordGenerator.java`

The Question server requires a private key/certificate generated by openssl. This can be initialised by calling `openssl req -new -x509 -days 365 -nodes -out cert.pem -keyout cert.pem`

The Testing server requires a JKS format keystore.jks and truststore.jks. These can be initialised by calling `keytool`. The certificate produced from the Question Server must also be imported into the truststore.

`keytool -keystore truststore.jks -importcert -alias client -file [qserver.cert]`

The Testing server also uses hashed and salted passwords in `TestingServer/store/passwords.txt` generated by the class PasswordAuthentication class [adapted from here](http://stackoverflow.com/a/2861125/3474). 

You can generate a hashed hash.txt by running `java PasswordGenerator [password.txt] [hash.txt]`


## Instructions

1) Follow the above setup instructions

2) Run `python2 QuestionServer.py [tls=true/false] [qport=INTEGER]` 

`qport` is the port used to connect to the Question Server.

`tls` defines whether Transport Layer Security is used socket communications between Testing Server and Question Server.

By default, `qserver` is localhost, `qport` is `48009` and tls is `true`.

`CTRL+C` is used to interrupt the server.

3) Run `java TestingServer [qserver=ADDRESS] [qport=INTEGER] [tls=true/false] [httpport=INTEGER]` for the testing server.

`qserver` is the address of the Question Server.

`qport` is the port used to connect to the Question Server.

`httpport` is the port used to connect to the 

`tls` defines whether Transport Layer Security is used to secure ALL socket communications (both http and t->q)

By default, `qserver` is localhost, `qport` is `48009`, tls is `true` and httpport is `8080`.

`kill` is used to interrupt the server.


## Credits

### General

Credit to [Beej's Guide to Network Soickets](http://beej.us/guide/bgnet/) and Oracle's Javadoc documentation/Pythondocs.

### Specific Examples
PasswordAuthentication class is [adapted from here](http://stackoverflow.com/a/2861125/3474).

Python QuestionServer socket connection is [loosely based on this example from binarytides](https://www.binarytides.com/python-socket-server-code-example/).

Java TestingServer SSL socket connection is [loosely based on this example from stackoverflow](https://stackoverflow.com/questions/2308479/simple-java-https-server)

Quiz data is taken from [tutorialspoint](https://www.tutorialspoint.com/)

Handling of HTTP Post Requests is adapted from [studytonight](https://www.studytonight.com/servlet/hidden-form-field.php) and [codeproject](https://www.codeproject.com/tips/1040097/create-simple-http-server-in-java)